<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=424n4I2wVSEGsz0GjOm09FyFcc8Y9Fyu"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/library/Heatmap/2.0/src/Heatmap_min.js"></script>
    <title>热力图功能示例</title>
    <style type="text/css">
		ul,li{list-style: none;margin:0;padding:0;float:left;}
		html{height:100%}
		body{height:100%;margin:0px;padding:0px;font-family:"微软雅黑";}
		#container{height:500px;width:100%;}
		#r-result{width:100%;}
    </style>	
</head>
<body>
	<div id="container"></div>
	<div id="r-result">
		<input type="button"  onclick="openHeatmap();" value="显示热力图"/><input type="button"  onclick="closeHeatmap();" value="关闭热力图"/>
	</div>
</body>
</html>
<script type="text/javascript">
    var map = new BMap.Map("container");          // 创建地图实例

    var point = new BMap.Point(116.418261, 39.921984);
    map.centerAndZoom(point, 15);             // 初始化地图，设置中心点坐标和地图级别
    map.enableScrollWheelZoom(); // 允许滚轮缩放
  
    var points =[{'lng': 126.71379885714663, 'lat': 45.788918420228654, 'count': '36.0'}, {'lng': 115.67608236670434, 'lat': 27.757258443440836, 'count': '40.0'}, {'lng': 121.48789948569473, 'lat': 31.24916171001514, 'count': '40.0'}, {'lng': 117.95546387714894, 'lat': 28.457622553937274, 'count': '38.4'}, {'lng': 116.28741059377916, 'lat': 40.10223608443306, 'count': '84.0'}, {'lng': 116.39564503787867, 'lat': 39.92998577808024, 'count': '40.0'}, {'lng': 112.29116669013915, 'lat': 31.4464667574663, 'count': '28.0'}, {'lng': 101.59295163700766, 'lat': 24.86421279548333, 'count': '34.0'}, {'lng': 121.48845381205882, 'lat': 31.23820244880028, 'count': '72.0'}, {'lng': 106.7349961033045, 'lat': 26.902825927796762, 'count': '28.0'}, {'lng': 109.96443623218283, 'lat': 27.531740822569677, 'count': '78.0'}, {'lng': 113.3948175587587, 'lat': 23.40800372902474, 'count': '32.0'}, {'lng': 113.30675517486429, 'lat': 23.2749230857589, 'count': '28.4'}, {'lng': 113.6943192777922, 'lat': 34.792317934391825, 'count': '42.0'}, {'lng': 111.720663546476, 'lat': 27.695864052356377, 'count': '44.0'}, {'lng': 113.30764967515182, 'lat': 23.12004910207623, 'count': '48.0'}, {'lng': 113.03770446779562, 'lat': 25.782263975738925, 'count': '60.0'}, {'lng': 114.31620010268132, 'lat': 30.58108412692075, 'count': '32.0'}, {'lng': 115.06447099780983, 'lat': 23.525442374357475, 'count': '33.6'}, {'lng': 111.720663546476, 'lat': 27.695864052356377, 'count': '32.0'}, {'lng': 121.48789948569473, 'lat': 31.24916171001514, 'count': '40.0'}, {'lng': 117.21081309155257, 'lat': 39.143929903310074, 'count': '40.0'}, {'lng': 120.3506448501983, 'lat': 30.592241247273577, 'count': '34.0'}, {'lng': 121.06918096565482, 'lat': 30.614066390362026, 'count': '78.0'}, {'lng': 120.61990711548988, 'lat': 31.317987367952437, 'count': '52.0'}, {'lng': 112.9516591965842, 'lat': 27.925940240691148, 'count': '28.0'}, {'lng': 113.04138132584929, 'lat': 23.07826538746981, 'count': '40.0'}, {'lng': 110.9381602143028, 'lat': 21.672861536750865, 'count': '48.0'}, {'lng': 116.39564503787867, 'lat': 39.92998577808024, 'count': '72.0'}, {'lng': 113.32276373452173, 'lat': 23.129766774317403, 'count': '44.0'}, {'lng': 111.720663546476, 'lat': 27.695864052356377, 'count': '64.0'}, {'lng': 121.25564035571598, 'lat': 31.31689186727434, 'count': '38.0'}, {'lng': 113.6196479260212, 'lat': 34.7469309478312, 'count': '50.8'}, {'lng': 121.54067027579354, 'lat': 31.33724179922964, 'count': '56.0'}, {'lng': 114.0259736573215, 'lat': 22.546053546205247, 'count': '98.0'}, {'lng': 121.48789948569473, 'lat': 31.24916171001514, 'count': '104.0'}, {'lng': 113.2355012764125, 'lat': 23.096098709243815, 'count': '28.0'}, {'lng': 113.03027714309576, 'lat': 28.20938543191536, 'count': '100.0'}, {'lng': 113.96944973065115, 'lat': 22.57100717322682, 'count': '36.0'}, {'lng': 125.15014857862096, 'lat': 42.98636494637781, 'count': '44.0'}, {'lng': 108.95348958107635, 'lat': 34.323094850955044, 'count': '40.0'}, {'lng': 120.2193754157201, 'lat': 30.259244461536102, 'count': '36.0'}, {'lng': 113.86753764340864, 'lat': 22.87086628885236, 'count': '34.0'}, {'lng': 120.88651709603442, 'lat': 30.160824201789847, 'count': '64.0'}, {'lng': 114.31620010268132, 'lat': 30.58108412692075, 'count': '26.0'}, {'lng': 114.31620010268132, 'lat': 30.58108412692075, 'count': '42.0'}, {'lng': 113.09556327824997, 'lat': 28.204469296913807, 'count': '108.0'}, {'lng': 121.41065006268637, 'lat': 31.170212459867557, 'count': '68.0'}, {'lng': 114.26868468188378, 'lat': 30.66159609752961, 'count': '2416.0'}, {'lng': 120.73767273555879, 'lat': 31.26560120796287, 'count': '54.0'}, {'lng': 118.10388604566381, 'lat': 24.489230612469232, 'count': '72.0'}, {'lng': 113.41485183952388, 'lat': 28.214829779492234, 'count': '48.0'}, {'lng': 113.76343399075655, 'lat': 23.043023815368237, 'count': '80.0'}, {'lng': 121.46439837626488, 'lat': 31.20884269990402, 'count': '72.0'}, {'lng': 106.564688655098, 'lat': 29.514370036810533, 'count': '54.0'}, {'lng': 118.11432965568882, 'lat': 24.713165999146565, 'count': '32.0'}, {'lng': 121.78395885741705, 'lat': 31.1209190164587, 'count': '52.0'}, {'lng': 113.93527165568692, 'lat': 22.549773136986246, 'count': '52.0'}, {'lng': 121.48789948569473, 'lat': 31.24916171001514, 'count': '44.0'}, {'lng': 113.99609053640589, 'lat': 22.685115702955205, 'count': '38.0'}, {'lng': 111.65301486742916, 'lat': 30.377054024654196, 'count': '52.0'}, {'lng': 120.2193754157201, 'lat': 30.259244461536102, 'count': '52.0'}, {'lng': 120.9369326414046, 'lat': 29.489820102907018, 'count': '104.0'}, {'lng': 112.41056219213213, 'lat': 31.209316250139747, 'count': '36.0'}, {'lng': 114.6127040718514, 'lat': 31.282099280766992, 'count': '48.0'}, {'lng': 119.17387221741889, 'lat': 34.60154896700999, 'count': '34.0'}, {'lng': 118.10388604566381, 'lat': 24.489230612469232, 'count': '40.0'}, {'lng': 121.48789948569473, 'lat': 31.24916171001514, 'count': '48.0'}, {'lng': 113.64964384986449, 'lat': 34.756610064140254, 'count': '56.0'}, {'lng': 111.47898142667381, 'lat': 30.408023564112714, 'count': '48.0'}, {'lng': 114.31620010268132, 'lat': 30.58108412692075, 'count': '34.0'}, {'lng': 113.66568897774792, 'lat': 30.164847150448974, 'count': '26.0'}, {'lng': 111.27283528868334, 'lat': 30.728844039219773, 'count': '30.4'}, {'lng': 111.28250894219478, 'lat': 30.71607425418112, 'count': '28.0'}, {'lng': 114.31620010268132, 'lat': 30.58108412692075, 'count': '32.0'}, {'lng': 114.4296415728728, 'lat': 30.48784461655362, 'count': '240.0'}, {'lng': 113.37848402810006, 'lat': 23.130181928902203, 'count': '36.0'}, {'lng': 121.78137704628527, 'lat': 29.921113952491073, 'count': '30.0'}, {'lng': 112.88201626084742, 'lat': 30.478884485058835, 'count': '36.0'}, {'lng': 112.41056219213213, 'lat': 31.209316250139747, 'count': '60.0'}, {'lng': 121.61512971190494, 'lat': 31.1980266098029, 'count': '52.0'}, {'lng': 114.2987933969669, 'lat': 30.54638496869491, 'count': '40.0'}, {'lng': 113.02804565698933, 'lat': 22.692785427725095, 'count': '56.0'}, {'lng': 121.34058006699048, 'lat': 28.68754849243302, 'count': '28.0'}, {'lng': 113.30764967515182, 'lat': 23.12004910207623, 'count': '48.0'}, {'lng': 119.28427197183152, 'lat': 29.45559114616145, 'count': '48.0'}, {'lng': 115.67608236670434, 'lat': 27.757258443440836, 'count': '32.0'}, {'lng': 121.30437665814227, 'lat': 31.025018609234728, 'count': '56.0'}, {'lng': 121.37268318030716, 'lat': 30.744447378087173, 'count': '48.0'}, {'lng': 114.31620010268132, 'lat': 30.58108412692075, 'count': '40.0'}, {'lng': 114.31620010268132, 'lat': 30.58108412692075, 'count': '32.0'}, {'lng': 114.31620010268132, 'lat': 30.58108412692075, 'count': '32.0'}, {'lng': 117.90694167058578, 'lat': 28.44206550035884, 'count': '48.0'}, {'lng': 103.96190695257648, 'lat': 30.691757330747247, 'count': '40.0'}, {'lng': 113.06629022984329, 'lat': 23.018776880548195, 'count': '40.0'}, {'lng': 116.39564503787867, 'lat': 39.92998577808024, 'count': '42.0'}, {'lng': 114.31792871916062, 'lat': 30.422626647982167, 'count': '100.0'}, {'lng': 119.7460999108375, 'lat': 29.96566985265899, 'count': '56.0'}, {'lng': 114.0259736573215, 'lat': 22.546053546205247, 'count': '80.0'}, {'lng': 121.13953324203962, 'lat': 28.250014472325823, 'count': '48.0'}, {'lng': 113.2678618897882, 'lat': 23.13168740183962, 'count': '40.0'}, {'lng': 121.48789948569473, 'lat': 31.24916171001514, 'count': '60.0'}, {'lng': 121.45934628900896, 'lat': 31.113189107111463, 'count': '32.0'}, {'lng': 114.31620010268132, 'lat': 30.58108412692075, 'count': '40.0'}, {'lng': 111.93640133038978, 'lat': 37.032359276940845, 'count': '48.0'}, {'lng': 117.19233018619312, 'lat': 35.08341224824772, 'count': '52.0'}, {'lng': 113.57604262519325, 'lat': 30.35057591287241, 'count': '28.0'}, {'lng': 114.31620010268132, 'lat': 30.58108412692075, 'count': '48.0'}, {'lng': 114.0259736573215, 'lat': 22.546053546205247, 'count': '48.0'}, {'lng': 115.67608236670434, 'lat': 27.757258443440836, 'count': '48.0'}, {'lng': 113.41485183952388, 'lat': 28.214829779492234, 'count': '52.0'}, {'lng': 114.41065807997101, 'lat': 23.11353985240842, 'count': '39.2'}, {'lng': 113.42206002079804, 'lat': 22.545177514512996, 'count': '48.0'}, {'lng': 120.2193754157201, 'lat': 30.259244461536102, 'count': '58.0'}, {'lng': 120.76042769895746, 'lat': 30.77399223958183, 'count': '41.2'}, {'lng': 114.31620010268132, 'lat': 30.58108412692075, 'count': '32.0'}, {'lng': 121.48789948569473, 'lat': 31.24916171001514, 'count': '45.592'}, {'lng': 121.67796628922625, 'lat': 38.900436431991984, 'count': '50.0'}, {'lng': 114.31620010268132, 'lat': 30.58108412692075, 'count': '32.0'}, {'lng': 118.04255506154666, 'lat': 35.278178616478925, 'count': '48.0'}, {'lng': 113.30764967515182, 'lat': 23.12004910207623, 'count': '72.0'}, {'lng': 111.78937551431858, 'lat': 23.16252762231215, 'count': '54.0'}, {'lng': 114.0259736573215, 'lat': 22.546053546205247, 'count': '60.0'}, {'lng': 114.0259736573215, 'lat': 22.546053546205247, 'count': '32.0'}, {'lng': 114.40666018618052, 'lat': 30.519346936165952, 'count': '40.0'}, {'lng': 113.87555958616946, 'lat': 22.8289360941909, 'count': '40.0'}, {'lng': 113.37065017614009, 'lat': 29.538980995227135, 'count': '28.0'}, {'lng': 113.39827887092147, 'lat': 22.53743585159463, 'count': '48.0'}, {'lng': 101.59295163700766, 'lat': 24.86421279548333, 'count': '40.0'}, {'lng': 112.41056219213213, 'lat': 31.209316250139747, 'count': '36.0'}, {'lng': 114.47610886697079, 'lat': 30.491239369850586, 'count': '40.0'}, {'lng': 119.24478394773224, 'lat': 34.706079861248554, 'count': '48.0'}, {'lng': 114.18072425340625, 'lat': 22.297489438182087, 'count': '40.4'}, {'lng': 112.22510791790272, 'lat': 32.09582601489678, 'count': '32.0'}, {'lng': 120.88284804083996, 'lat': 30.150897362396897, 'count': '44.0'}, {'lng': 114.565034875862, 'lat': 23.127716652419444, 'count': '40.0'}, {'lng': 113.4219994750067, 'lat': 23.164411195340815, 'count': '30.0'}, {'lng': 109.11903155308521, 'lat': 21.481014126528635, 'count': '44.0'}, {'lng': 113.95533152648115, 'lat': 22.54936387823735, 'count': '20.0'}, {'lng': 114.53168293978645, 'lat': 30.48942419901677, 'count': '40.0'}, {'lng': 114.0259736573215, 'lat': 22.546053546205247, 'count': '80.0'}, {'lng': 115.67608236670434, 'lat': 27.757258443440836, 'count': '84.0'}, {'lng': 113.89414233548528, 'lat': 22.93184540333949, 'count': '40.0'}, {'lng': 113.15994727931641, 'lat': 27.842399183456177, 'count': '40.0'}, {'lng': 121.48789948569473, 'lat': 31.24916171001514, 'count': '52.0'}, {'lng': 112.22379935626633, 'lat': 31.079793940665134, 'count': '26.0'}, {'lng': 115.38182570372824, 'lat': 30.755828658257236, 'count': '42.0'}, {'lng': 119.56313340394783, 'lat': 29.602129342574262, 'count': '40.0'}, {'lng': 117.15075021844255, 'lat': 36.68806779476238, 'count': '48.0'}, {'lng': 113.94809353404031, 'lat': 22.55069755510562, 'count': '40.0'}, {'lng': 125.14013375496496, 'lat': 42.90782086512459, 'count': '28.0'}, {'lng': 114.0259736573215, 'lat': 22.546053546205247, 'count': '56.0'}, {'lng': 121.57900597258933, 'lat': 29.885258965918055, 'count': '48.0'}, {'lng': 116.86380647644208, 'lat': 38.297615350325714, 'count': '48.0'}, {'lng': 115.90607280448233, 'lat': 28.668254133480264, 'count': '23.2'}, {'lng': 113.30764967515182, 'lat': 23.12004910207623, 'count': '52.0'}, {'lng': 121.34373474077093, 'lat': 28.69422680186178, 'count': '50.4'}, {'lng': 113.3948175587587, 'lat': 23.40800372902474, 'count': '48.0'}, {'lng': 112.41056219213213, 'lat': 31.209316250139747, 'count': '36.0'}, {'lng': 106.53063501341296, 'lat': 29.54460610888615, 'count': '38.4'}, {'lng': 113.26913764171371, 'lat': 23.137655682126187, 'count': '44.0'}, {'lng': 114.32462143656603, 'lat': 30.558756240785204, 'count': '48.0'}, {'lng': 115.8753757118766, 'lat': 28.709943098401524, 'count': '80.0'}, {'lng': 121.50563084874426, 'lat': 28.66801298568706, 'count': '44.0'}, {'lng': 113.42206002079804, 'lat': 22.545177514512996, 'count': '52.0'}, {'lng': 119.281594751921, 'lat': 26.113739827203563, 'count': '28.0'}, {'lng': 114.3454175792239, 'lat': 30.538011971316084, 'count': '32.0'}, {'lng': 119.36848893835847, 'lat': 33.01379716995394, 'count': '0.0'}, {'lng': 114.0259736573215, 'lat': 22.546053546205247, 'count': '40.0'}, {'lng': 121.47563795759031, 'lat': 28.68076623356457, 'count': '38.0'}, {'lng': 116.29714215565699, 'lat': 39.84035214048751, 'count': '32.0'}, {'lng': 113.76343399075655, 'lat': 23.043023815368237, 'count': '48.0'}, {'lng': 120.21873068505536, 'lat': 29.126898184248475, 'count': '54.0'}, {'lng': 121.57345561233664, 'lat': 28.708793612297967, 'count': '36.0'}, {'lng': 114.31620010268132, 'lat': 30.58108412692075, 'count': '40.0'}, {'lng': 120.42006504572086, 'lat': 36.32800418433229, 'count': '40.0'}, {'lng': 114.53371673310512, 'lat': 30.48096995917562, 'count': '32.0'}, {'lng': 113.83598545558486, 'lat': 22.793480037170948, 'count': '60.0'}, {'lng': 119.20908073595001, 'lat': 34.555953874364796, 'count': '72.0'}, {'lng': 112.41056219213213, 'lat': 31.209316250139747, 'count': '32.0'}, {'lng': 121.14984779161374, 'lat': 28.84800450067189, 'count': '228.0'}, {'lng': 102.72139762124971, 'lat': 25.01789034979101, 'count': '40.0'}, {'lng': 121.38802992147018, 'lat': 31.27123732975632, 'count': '44.0'}, {'lng': 113.42019285057583, 'lat': 23.062759081354038, 'count': '48.0'}, {'lng': 126.48911936387525, 'lat': 43.96167780796705, 'count': '64.0'}, {'lng': 113.34196305918009, 'lat': 22.04422277229714, 'count': '60.0'}, {'lng': 112.87207848215958, 'lat': 28.219222997529126, 'count': '42.0'}, {'lng': 114.06637863067199, 'lat': 22.51469740720364, 'count': '40.0'}, {'lng': 113.81566398834484, 'lat': 22.774023563452467, 'count': '88.0'}, {'lng': 114.31620010268132, 'lat': 30.58108412692075, 'count': '30.0'}, {'lng': 121.48789948569473, 'lat': 31.24916171001514, 'count': '48.0'}, {'lng': 113.46147708805411, 'lat': 22.6870819434157, 'count': '34.0'}, {'lng': 121.39098859307411, 'lat': 31.083494761701996, 'count': '48.0'}, {'lng': 108.5047669724944, 'lat': 32.901391285068726, 'count': '120.0'}, {'lng': 121.41405401175534, 'lat': 31.1649388383254, 'count': '36.0'}, {'lng': 113.14518668250354, 'lat': 23.108849088390308, 'count': '52.0'}, {'lng': 118.10388604566381, 'lat': 24.489230612469232, 'count': '32.0'}, {'lng': 121.42454234019964, 'lat': 28.659940543921913, 'count': '36.0'}, {'lng': 114.55041664575614, 'lat': 30.483788773185083, 'count': '42.0'}, {'lng': 112.41056219213213, 'lat': 31.209316250139747, 'count': '48.0'}, {'lng': 114.06637863067199, 'lat': 22.51469740720364, 'count': '40.0'}, {'lng': 121.48496508091583, 'lat': 31.245183207005375, 'count': '39.2'}, {'lng': 114.14398067132706, 'lat': 38.85334118049566, 'count': '34.0'}, {'lng': 114.31620010268132, 'lat': 30.58108412692075, 'count': '56.0'}, {'lng': 113.30764967515182, 'lat': 23.12004910207623, 'count': '0.0'}, {'lng': 105.34479458268754, 'lat': 30.105019087309568, 'count': '30.0'}, {'lng': 119.36848893835847, 'lat': 33.01379716995394, 'count': '3200.0'}, {'lng': 114.42919666730626, 'lat': 30.508804857568844, 'count': '0.0'}, {'lng': 113.94809353404031, 'lat': 22.55069755510562, 'count': '36.0'}, {'lng': 112.41056219213213, 'lat': 31.209316250139747, 'count': '34.0'}, {'lng': 113.46147708805411, 'lat': 22.6870819434157, 'count': '32.0'}, {'lng': 113.30764967515182, 'lat': 23.12004910207623, 'count': '52.0'}, {'lng': 116.39564503787867, 'lat': 39.92998577808024, 'count': '0.0'}, {'lng': 114.31620010268132, 'lat': 30.58108412692075, 'count': '0.0'}, {'lng': 121.30388048897521, 'lat': 31.367501526897456, 'count': '32.0'}, {'lng': 116.33020380037522, 'lat': 39.971263613594296, 'count': '44.0'}, {'lng': 119.95720242066378, 'lat': 29.159494120760925, 'count': '64.0'}, {'lng': 113.30764967515182, 'lat': 23.12004910207623, 'count': '52.0'}, {'lng': 113.07951142655509, 'lat': 28.22924162991771, 'count': '32.0'}, {'lng': 121.59417655603681, 'lat': 29.885784017521228, 'count': '68.0'}, {'lng': 121.55695526724317, 'lat': 28.69608353777588, 'count': '32.0'}, {'lng': 113.53891465228034, 'lat': 29.99677200041505, 'count': '32.0'}, {'lng': 113.18366276395855, 'lat': 29.37817120935277, 'count': '52.0'}, {'lng': 114.31620010268132, 'lat': 30.58108412692075, 'count': '28.0'}, {'lng': 113.84611553722426, 'lat': 27.618575232249093, 'count': '0.0'}, {'lng': 112.21733029896677, 'lat': 31.04261120294864, 'count': '36.0'}, {'lng': 116.2319484417453, 'lat': 36.90381310319515, 'count': '32.0'}, {'lng': 114.4535014286928, 'lat': 38.117218640478164, 'count': '40.0'}, {'lng': 113.11539783336134, 'lat': 23.56637429250594, 'count': '48.0'}, {'lng': 116.39564503787867, 'lat': 39.92998577808024, 'count': '0.0'}, {'lng': 113.56244702618993, 'lat': 22.25691464612574, 'count': '42.0'}, {'lng': 112.14975131443444, 'lat': 31.721173303847927, 'count': '28.0'}, {'lng': 119.36848893835847, 'lat': 33.01379716995394, 'count': '28.0'}, {'lng': 114.52208184420766, 'lat': 38.048958314615454, 'count': '0.0'}, {'lng': 119.95720242066378, 'lat': 29.159494120760925, 'count': '32.0'}, {'lng': 115.48102224121077, 'lat': 30.932372750756645, 'count': '0.0'}, {'lng': 120.2193754157201, 'lat': 30.259244461536102, 'count': '0.0'}, {'lng': 114.31620010268132, 'lat': 30.58108412692075, 'count': '40.0'}, {'lng': 117.73442666784001, 'lat': 39.05103712447575, 'count': '32.0'}, {'lng': 120.7990396545234, 'lat': 31.343505903538606, 'count': '40.0'}, {'lng': 113.91993524953385, 'lat': 22.486819380572694, 'count': '52.0'}, {'lng': 117.2160052075697, 'lat': 31.85925241707919, 'count': '52.0'}, {'lng': 121.46349802531327, 'lat': 31.029827335631364, 'count': '40.0'}, {'lng': 120.30441347717809, 'lat': 31.595126505470454, 'count': '32.0'}, {'lng': 112.97237665036747, 'lat': 27.888774251606183, 'count': '44.0'}, {'lng': 114.31620010268132, 'lat': 30.58108412692075, 'count': '84.0'}, {'lng': 117.98494311990738, 'lat': 26.050118295660656, 'count': '38.4'}, {'lng': 120.40677308408983, 'lat': 36.10447729342024, 'count': '60.0'}, {'lng': 114.3343013930037, 'lat': 22.77349506205601, 'count': '0.0'}, {'lng': 113.15509457007174, 'lat': 29.404000869881166, 'count': '48.0'}, {'lng': 120.2193754157201, 'lat': 30.259244461536102, 'count': '80.0'}, {'lng': 113.30764967515182, 'lat': 23.12004910207623, 'count': '44.0'}, {'lng': 121.54067027579354, 'lat': 31.33724179922964, 'count': '0.0'}, {'lng': 119.96167662673285, 'lat': 30.567882647818298, 'count': '0.0'}, {'lng': 112.44925722672401, 'lat': 23.0704205642659, 'count': '0.0'}, {'lng': 113.30764967515182, 'lat': 23.12004910207623, 'count': '0.0'}, {'lng': 114.06637863067199, 'lat': 22.51469740720364, 'count': '0.0'}, {'lng': 111.37553355504939, 'lat': 30.294919731409415, 'count': '28.0'}, {'lng': 115.67608236670434, 'lat': 27.757258443440836, 'count': '0.0'}, {'lng': 113.45376517477894, 'lat': 23.189893232222033, 'count': '40.0'}, {'lng': 120.30436880624168, 'lat': 30.227955053488138, 'count': '34.0'}, {'lng': 111.35063259001883, 'lat': 30.721174570946964, 'count': '38.0'}, {'lng': 119.12390738698731, 'lat': 37.01638156564429, 'count': '36.0'}, {'lng': 114.9066180465751, 'lat': 30.446108937901133, 'count': '28.0'}, {'lng': 114.27219590210522, 'lat': 30.602395077452158, 'count': '0.0'}, {'lng': 110.68090186818529, 'lat': 25.611472803064657, 'count': '0.0'}, {'lng': 111.720663546476, 'lat': 27.695864052356377, 'count': '36.0'}, {'lng': 116.30095521281793, 'lat': 40.05698586023914, 'count': '0.0'}, {'lng': 116.56658877300194, 'lat': 39.87526155151207, 'count': '76.0'}, {'lng': 114.32530653465307, 'lat': 30.372826128459515, 'count': '0.0'}, {'lng': 120.96184111526692, 'lat': 31.28834791693079, 'count': '32.0'}, {'lng': 112.41056219213213, 'lat': 31.209316250139747, 'count': '0.0'}, {'lng': 119.10343955972215, 'lat': 36.69365161765582, 'count': '22.8'}, {'lng': 114.31620010268132, 'lat': 30.58108412692075, 'count': '0.0'}, {'lng': 114.31620010268132, 'lat': 30.58108412692075, 'count': '28.8'}, {'lng': 118.89394324253564, 'lat': 32.17629021215592, 'count': '40.0'}, {'lng': 121.1377239209316, 'lat': 31.205884931556096, 'count': '32.0'}, {'lng': 113.91693624850504, 'lat': 22.89261585734769, 'count': '48.0'}, {'lng': 111.97700975587391, 'lat': 21.87151730451877, 'count': '42.0'}, {'lng': 111.720663546476, 'lat': 27.695864052356377, 'count': '32.0'}, {'lng': 113.14619551911636, 'lat': 29.378007075474304, 'count': '32.0'}, {'lng': 113.00796920796692, 'lat': 28.200591643062623, 'count': '48.0'}, {'lng': 120.67065688988589, 'lat': 28.020947294324767, 'count': '32.0'}, {'lng': 121.59800085230364, 'lat': 29.875392472119792, 'count': '0.0'}];
   
    if(!isSupportCanvas()){
    	alert('热力图目前只支持有canvas支持的浏览器,您所使用的浏览器不能使用热力图功能~')
    }
	//详细的参数,可以查看heatmap.js的文档 https://github.com/pa7/heatmap.js/blob/master/README.md
	//参数说明如下:
	/* visible 热力图是否显示,默认为true
     * opacity 热力的透明度,1-100
     * radius 势力图的每个点的半径大小   
     * gradient  {JSON} 热力图的渐变区间 . gradient如下所示
     *	{
			.2:'rgb(0, 255, 255)',
			.5:'rgb(0, 110, 255)',
			.8:'rgb(100, 0, 255)'
		}
		其中 key 表示插值的位置, 0~1. 
		    value 为颜色值. 
     */
	heatmapOverlay = new BMapLib.HeatmapOverlay({"radius":20});
	map.addOverlay(heatmapOverlay);
	heatmapOverlay.setDataSet({data:points,max:100});
	//是否显示热力图
    function openHeatmap(){
        heatmapOverlay.show();
    }
	function closeHeatmap(){
        heatmapOverlay.hide();
    }
	closeHeatmap();
    function setGradient(){
     	/*格式如下所示:
		{
	  		0:'rgb(102, 255, 0)',
	 	 	.5:'rgb(255, 170, 0)',
		  	1:'rgb(255, 0, 0)'
		}*/
     	var gradient = {};
     	var colors = document.querySelectorAll("input[type='color']");
     	colors = [].slice.call(colors,0);
     	colors.forEach(function(ele){
			gradient[ele.getAttribute("data-key")] = ele.value; 
     	});
        heatmapOverlay.setOptions({"gradient":gradient});
    }
	//判断浏览区是否支持canvas
    function isSupportCanvas(){
        var elem = document.createElement('canvas');
        return !!(elem.getContext && elem.getContext('2d'));
    }
</script>
